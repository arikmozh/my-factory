{"ast":null,"code":"var _jsxFileName = \"/Users/arikmoz/Desktop/Bootcamp/Projects/my-factory-v1/src/Pages/EditDepartmentPage.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useParams } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport departmentUtils from \"../Utils/departmentUtils\";\nimport { Typography, Button, TextField, MenuItem, Select, FormControl, InputLabel } from \"@mui/material\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst EditDepartmentPage = () => {\n  _s();\n\n  const storeData = useSelector(state => state);\n  let token = sessionStorage[\"token\"];\n  const params = useParams();\n  const [dep, setDep] = useState({});\n  const [emp, setEmp] = useState([]);\n  const [empNotInDep, setEmpNotInDep] = useState([]);\n  const [depNameError, setDepNameError] = useState(false);\n  useEffect(() => {\n    let all_db_data = storeData.db;\n    let d = all_db_data.departments.filter(x => x.Name == params.dName);\n\n    if (d.length > 0) {\n      setDep(d[0]);\n    }\n\n    let e = all_db_data.employees;\n    setEmp(e);\n    let employeesNotInThisDep = [];\n    let A = e.map(x => x.hasOwnProperty(\"DepartmentId\"));\n\n    for (let i = 0; i < A.length; i++) {\n      if (A[i] == true) {\n        for (let j = 0; j < e[i].DepartmentId.length; j++) {\n          if (e[i].DepartmentId[j].Name != d[0].Name) {\n            employeesNotInThisDep.push(e[i]);\n          }\n        }\n      } else {\n        employeesNotInThisDep.push(e[i]);\n      }\n    }\n\n    setEmpNotInDep(employeesNotInThisDep);\n    console.log(employeesNotInThisDep);\n    console.log(e);\n    console.log(d[0]);\n  }, []);\n\n  const handleChange = () => {};\n\n  const DeleteDep = async () => {\n    await departmentUtils.delete_department(dep._id, token);\n  };\n\n  const UpdateDep = async () => {\n    await departmentUtils.update_department(token, dep._id, dep);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      pb: 2,\n      color: \"primary.second\",\n      children: /*#__PURE__*/_jsxDEV(\"b\", {\n        children: \" Edit Department\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      children: \" Department name:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TextField, {\n      id: \"outlined-basic\",\n      variant: \"outlined\",\n      fullWidth: true,\n      value: dep.Name,\n      required: true,\n      onChange: e => setDep({ ...dep,\n        Name: e.target.value\n      }),\n      sx: {\n        mb: 3\n      },\n      error: depNameError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), \" \", /*#__PURE__*/_jsxDEV(FormControl, {\n      sx: {\n        width: \"100%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n        id: \"demo-simple-select-label\",\n        children: \"Choose Manager\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Select, {\n        labelId: \"demo-simple-select-label\",\n        id: \"demo-simple-select\" // value={{depManager}}\n        // value={newDep.Manager}\n        ,\n        label: \"Choose Manager\",\n        onChange: handleChange,\n        fullWidth: true,\n        children: emp === null || emp === void 0 ? void 0 : emp.map((item, index) => {\n          if (item._id == dep.Manager) {\n            return /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: item._id,\n              selected: true,\n              children: [item.FirstName, \" \", item.LastName]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 17\n            }, this);\n          } else {\n            return /*#__PURE__*/_jsxDEV(MenuItem, {\n              value: item._id,\n              children: [item.FirstName, \" \", item.LastName]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 17\n            }, this);\n          }\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"button\",\n      value: \"Update\",\n      onClick: UpdateDep\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"button\",\n      value: \"Delete\",\n      onClick: DeleteDep\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(InputLabel, {\n      id: \"demo-simple-select-label\",\n      children: \"Allocate selected Employee\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Select, {\n      labelId: \"demo-simple-select-label\",\n      id: \"demo-simple-select\" // value={{depManager}}\n      // value={newDep.Manager}\n      ,\n      label: \"Choose Manager\",\n      onChange: handleChange,\n      fullWidth: true,\n      children: empNotInDep.map((item, index) => {\n        return /*#__PURE__*/_jsxDEV(MenuItem, {\n          value: item._id,\n          children: [item.FirstName, \" \", item.LastName]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n\n_s(EditDepartmentPage, \"1k3puptaxYlfEXqQf6tNm+WaWZ4=\", false, function () {\n  return [useSelector, useParams];\n});\n\n_c = EditDepartmentPage;\nexport default EditDepartmentPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditDepartmentPage\");","map":{"version":3,"sources":["/Users/arikmoz/Desktop/Bootcamp/Projects/my-factory-v1/src/Pages/EditDepartmentPage.js"],"names":["React","useSelector","useParams","useEffect","useState","departmentUtils","Typography","Button","TextField","MenuItem","Select","FormControl","InputLabel","EditDepartmentPage","storeData","state","token","sessionStorage","params","dep","setDep","emp","setEmp","empNotInDep","setEmpNotInDep","depNameError","setDepNameError","all_db_data","db","d","departments","filter","x","Name","dName","length","e","employees","employeesNotInThisDep","A","map","hasOwnProperty","i","j","DepartmentId","push","console","log","handleChange","DeleteDep","delete_department","_id","UpdateDep","update_department","target","value","mb","width","item","index","Manager","FirstName","LastName"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useParams } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport departmentUtils from \"../Utils/departmentUtils\";\nimport {\n  Typography,\n  Button,\n  TextField,\n  MenuItem,\n  Select,\n  FormControl,\n  InputLabel,\n} from \"@mui/material\";\n\nconst EditDepartmentPage = () => {\n  const storeData = useSelector((state) => state);\n  let token = sessionStorage[\"token\"];\n  const params = useParams();\n  const [dep, setDep] = useState({});\n  const [emp, setEmp] = useState([]);\n  const [empNotInDep, setEmpNotInDep] = useState([]);\n  const [depNameError, setDepNameError] = useState(false);\n\n  useEffect(() => {\n    let all_db_data = storeData.db;\n\n    let d = all_db_data.departments.filter((x) => x.Name == params.dName);\n    if (d.length > 0) {\n      setDep(d[0]);\n    }\n\n    let e = all_db_data.employees;\n    setEmp(e);\n\n    let employeesNotInThisDep = [];\n\n    let A = e.map((x) => x.hasOwnProperty(\"DepartmentId\"));\n    for (let i = 0; i < A.length; i++) {\n      if (A[i] == true) {\n        for (let j = 0; j < e[i].DepartmentId.length; j++) {\n          if (e[i].DepartmentId[j].Name != d[0].Name) {\n            employeesNotInThisDep.push(e[i]);\n          }\n        }\n      } else {\n        employeesNotInThisDep.push(e[i]);\n      }\n    }\n    setEmpNotInDep(employeesNotInThisDep);\n    console.log(employeesNotInThisDep);\n\n    console.log(e);\n    console.log(d[0]);\n  }, []);\n\n  const handleChange = () => {};\n\n  const DeleteDep = async () => {\n    await departmentUtils.delete_department(dep._id, token);\n  };\n  const UpdateDep = async () => {\n    await departmentUtils.update_department(token, dep._id, dep);\n  };\n\n  return (\n    <div>\n      <Typography variant=\"h4\" pb={2} color=\"primary.second\">\n        <b> Edit Department</b>\n      </Typography>\n      <Typography> Department name:</Typography>\n      <TextField\n        id=\"outlined-basic\"\n        variant=\"outlined\"\n        fullWidth\n        value={dep.Name}\n        required\n        onChange={(e) => setDep({ ...dep, Name: e.target.value })}\n        sx={{ mb: 3 }}\n        error={depNameError}\n      />{\" \"}\n      <FormControl sx={{ width: \"100%\" }}>\n        <InputLabel id=\"demo-simple-select-label\">Choose Manager</InputLabel>\n        <Select\n          labelId=\"demo-simple-select-label\"\n          id=\"demo-simple-select\"\n          // value={{depManager}}\n          // value={newDep.Manager}\n          label=\"Choose Manager\"\n          onChange={handleChange}\n          fullWidth\n        >\n          {emp?.map((item, index) => {\n            if (item._id == dep.Manager) {\n              return (\n                <MenuItem key={index} value={item._id} selected>\n                  {item.FirstName} {item.LastName}\n                </MenuItem>\n              );\n            } else {\n              return (\n                <MenuItem key={index} value={item._id}>\n                  {item.FirstName} {item.LastName}\n                </MenuItem>\n              );\n            }\n          })}\n        </Select>\n      </FormControl>\n      <input type=\"button\" value=\"Update\" onClick={UpdateDep} />\n      <input type=\"button\" value=\"Delete\" onClick={DeleteDep} />\n      <br /> <br />\n      <InputLabel id=\"demo-simple-select-label\">\n        Allocate selected Employee\n      </InputLabel>\n      <Select\n        labelId=\"demo-simple-select-label\"\n        id=\"demo-simple-select\"\n        // value={{depManager}}\n        // value={newDep.Manager}\n        label=\"Choose Manager\"\n        onChange={handleChange}\n        fullWidth\n      >\n        {empNotInDep.map((item, index) => {\n          return (\n            <MenuItem key={index} value={item._id}>\n              {item.FirstName} {item.LastName}\n            </MenuItem>\n          );\n        })}\n      </Select>\n    </div>\n  );\n};\n\nexport default EditDepartmentPage;\n"]},"metadata":{},"sourceType":"module"}